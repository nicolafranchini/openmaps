jQuery(document).ready(function(o){"use strict";o(".wrap-openmaps").each(function(e){!function(e){if("undefined"==typeof ol||null===ol)return console.log("WARNING: OpenLayers Library not loaded"),!1;var n,l,a,t,i,r,s,c,p;n=e.mapid,l=e.lat,a=e.lon,r=e.style_url,s=e.custom_style,c=e.attribution,t=e.zoom,i=e.zoom_scroll,i=1==e.zoom_scroll;var m=ol.proj.fromLonLat([parseFloat(a),parseFloat(l)]);if(0==s){p="default"==r?new ol.source.OSM:c?new ol.source.OSM({url:r,attributions:c}):new ol.source.OSM({url:r});var f=new ol.Map({target:"openmaps_"+n,view:new ol.View({center:m,zoom:t,maxZoom:24,minZoom:1}),layers:[new ol.layer.Tile({source:p})],controls:ol.control.defaults({attributionOptions:{collapsible:!0}}),interactions:ol.interaction.defaults({mouseWheelZoom:i})})}else f=new ol.Map({target:"openmaps_"+n,view:new ol.View({constrainResolution:!0,center:m,zoom:t,maxZoom:24,minZoom:1}),controls:ol.control.defaults({attributionOptions:{collapsible:!0}}),interactions:ol.interaction.defaults({mouseWheelZoom:i})}),olms.apply(f,r);o("#wrap-overlay-"+n+" .wpol-infomarker").each(function(e){var l=o(this).data("marker"),a=ol.proj.fromLonLat([parseFloat(l.lon),parseFloat(l.lat)]),t=parseFloat(l.size),i=-1*t/2,r=-1*(t+12),s=new ol.Overlay({position:a,positioning:"center-center",offset:[0,i],element:document.getElementById("infomarker_"+n+"_"+e)});f.addOverlay(s);var c=new ol.Overlay({position:a,positioning:"bottom-center",offset:[0,r],element:document.getElementById("infopanel_"+n+"_"+e)});f.on("movestart",function(){f.removeOverlay(c)}),f.on("moveend",function(){f.addOverlay(c),o(".wpol-infopanel").closest(".ol-overlay-container").addClass("wpol-infopanel-overlay")})})}(o(this).data("infomap"))}),o(document).on("click",".wpol-infopanel",function(){o(".ol-overlay-container").removeClass("wpol-infopanel-active"),o(this).closest(".ol-overlay-container").addClass("wpol-infopanel-active")}),o(document).on("click",".wpol-infopanel-close",function(){o(this).parent(".wpol-infopanel").fadeOut()}),o(document).on("click",".wpol-infomarker",function(){var e=o(this).data("paneltarget"),n=o("#infopanel_"+e);o(".ol-overlay-container").removeClass("wpol-infopanel-active"),n.closest(".ol-overlay-container").addClass("wpol-infopanel-active"),n.fadeIn()})});
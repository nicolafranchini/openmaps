jQuery(document).ready(function(o){"use strict";o(".wrap-openmaps").each(function(e){!function(e){if("undefined"==typeof ol||null===ol)return console.log("WARNING: OpenLayers Library not loaded"),!1;var n,a,l,t,i,r;n=e.mapid,a=e.lat,l=e.lon,t=e.style,i=e.zoom,r=e.zoom_scroll,r=1==e.zoom_scroll;var s=ol.proj.fromLonLat([parseFloat(l),parseFloat(a)]);if(0==t)var c=new ol.Map({target:"openmaps_"+n,view:new ol.View({center:s,zoom:i,maxZoom:24,minZoom:1}),layers:[new ol.layer.Tile({source:new ol.source.OSM})],interactions:ol.interaction.defaults({mouseWheelZoom:r})});else c=new ol.Map({target:"openmaps_"+n,view:new ol.View({constrainResolution:!0,center:s,zoom:i,maxZoom:24,minZoom:1}),interactions:ol.interaction.defaults({mouseWheelZoom:r})}),olms.apply(c,t);o("#wrap-overlay-"+n+" .wpol-infomarker").each(function(e){var a=o(this).data("marker"),l=ol.proj.fromLonLat([parseFloat(a.lon),parseFloat(a.lat)]),t=parseFloat(a.size),i=-1*t/2,r=-1*(t+12),s=new ol.Overlay({position:l,positioning:"center-center",offset:[0,i],element:document.getElementById("infomarker_"+n+"_"+e)});c.addOverlay(s);var p=new ol.Overlay({position:l,positioning:"bottom-center",offset:[0,r],element:document.getElementById("infopanel_"+n+"_"+e)});c.on("movestart",function(){c.removeOverlay(p)}),c.on("moveend",function(){c.addOverlay(p),o(".wpol-infopanel").closest(".ol-overlay-container").addClass("wpol-infopanel-overlay")})})}(o(this).data("infomap"))}),o(document).on("click",".wpol-infopanel",function(){o(".ol-overlay-container").removeClass("wpol-infopanel-active"),o(this).closest(".ol-overlay-container").addClass("wpol-infopanel-active")}),o(document).on("click",".wpol-infopanel-close",function(){o(this).parent(".wpol-infopanel").fadeOut()}),o(document).on("click",".wpol-infomarker",function(){var e=o(this).data("paneltarget");o("#infopanel_"+e).fadeIn()})});
jQuery(document).ready(function(o){"use strict";o(".wrap-openmaps").each(function(e){!function(e){if("undefined"==typeof ol||null===ol)return console.log("WARNING: OpenLayers Library not loaded"),!1;var n,a,l,t,r,i,s,c,p;n=e.mapid,a=e.lat,l=e.lon,i=e.style_url,s=e.custom_style,c=e.attribution,t=e.zoom,r=e.zoom_scroll,r=1==e.zoom_scroll;var m=ol.proj.fromLonLat([parseFloat(l),parseFloat(a)]);if(0==s){p="default"==i?new ol.source.OSM:c?new ol.source.OSM({url:i,attributions:c}):new ol.source.OSM({url:i});var f=new ol.Map({target:"openmaps_"+n,view:new ol.View({center:m,zoom:t,maxZoom:24,minZoom:1}),layers:[new ol.layer.Tile({source:p})],interactions:ol.interaction.defaults({mouseWheelZoom:r})})}else f=new ol.Map({target:"openmaps_"+n,view:new ol.View({constrainResolution:!0,center:m,zoom:t,maxZoom:24,minZoom:1}),interactions:ol.interaction.defaults({mouseWheelZoom:r})}),olms.apply(f,i);o("#wrap-overlay-"+n+" .wpol-infomarker").each(function(e){var a=o(this).data("marker"),l=ol.proj.fromLonLat([parseFloat(a.lon),parseFloat(a.lat)]),t=parseFloat(a.size),r=-1*t/2,i=-1*(t+12),s=new ol.Overlay({position:l,positioning:"center-center",offset:[0,r],element:document.getElementById("infomarker_"+n+"_"+e)});f.addOverlay(s);var c=new ol.Overlay({position:l,positioning:"bottom-center",offset:[0,i],element:document.getElementById("infopanel_"+n+"_"+e)});f.on("movestart",function(){f.removeOverlay(c)}),f.on("moveend",function(){f.addOverlay(c),o(".wpol-infopanel").closest(".ol-overlay-container").addClass("wpol-infopanel-overlay")})})}(o(this).data("infomap"))}),o(document).on("click",".wpol-infopanel",function(){o(".ol-overlay-container").removeClass("wpol-infopanel-active"),o(this).closest(".ol-overlay-container").addClass("wpol-infopanel-active")}),o(document).on("click",".wpol-infopanel-close",function(){o(this).parent(".wpol-infopanel").fadeOut()}),o(document).on("click",".wpol-infomarker",function(){var e=o(this).data("paneltarget"),n=o("#infopanel_"+e);o(".ol-overlay-container").removeClass("wpol-infopanel-active"),n.closest(".ol-overlay-container").addClass("wpol-infopanel-active"),n.fadeIn()})});
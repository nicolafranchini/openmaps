jQuery(document).ready(function(o){"use strict";o(".wrap-venomaps").each(function(e){!function e(n){if("undefined"==typeof ol||null===ol)return console.log("WARNING: OpenLayers Library not loaded"),!1;t=n.mapid,a=n.lat,l=n.lon,s=n.style_url,c=n.custom_style,p=n.attribution,i=n.zoom,r=n.zoom_scroll,r=1==n.zoom_scroll;var t,a,l,i,r,s,c,p,f,m=ol.proj.fromLonLat([parseFloat(l),parseFloat(a)]);if(0==c){f="default"==s?new ol.source.OSM:new ol.source.OSM(p?{url:s,attributions:p}:{url:s});var u=new ol.Map({target:"venomaps_"+t,view:new ol.View({center:m,zoom:i,maxZoom:22,minZoom:1}),layers:[new ol.layer.Tile({source:f})],controls:ol.control.defaults({attributionOptions:{collapsible:!0}}),interactions:ol.interaction.defaults({mouseWheelZoom:r})})}else{var u=new ol.Map({target:"venomaps_"+t,view:new ol.View({constrainResolution:!0,center:m,zoom:i,maxZoom:22,minZoom:1}),controls:ol.control.defaults({attributionOptions:{collapsible:!0}}),interactions:ol.interaction.defaults({mouseWheelZoom:r})});olms.apply(u,s)}o("#wrap-overlay-"+t+" .wpol-infomarker").each(function(e){var n=o(this).data("marker"),a=ol.proj.fromLonLat([parseFloat(n.lon),parseFloat(n.lat)]),l=parseFloat(n.size),i=document.getElementById("infomarker_"+t+"_"+e);if(i){var r=new ol.Overlay({position:a,positioning:"center-center",offset:[0,-1*l/2],element:i,stopEvent:!0});u.addOverlay(r),i.addEventListener("mousedown",function(o){return o.preventDefault(),!1})}var s=new ol.Overlay({position:a,positioning:"bottom-center",offset:[0,-((l+12)*1)],element:document.getElementById("infopanel_"+t+"_"+e)});u.on("movestart",function(){u.removeOverlay(s)}),u.on("moveend",function(){u.addOverlay(s),o(".wpol-infopanel").closest(".ol-overlay-container").addClass("wpol-infopanel-overlay")})})}(o(this).data("infomap"))}),o(document).on("click",".wpol-infopanel",function(){o(".ol-overlay-container").removeClass("wpol-infopanel-active"),o(this).closest(".ol-overlay-container").addClass("wpol-infopanel-active")}),o(document).on("click",".wpol-infopanel-close",function(){o(this).parent(".wpol-infopanel").fadeOut()}),o(document).on("click",".wpol-infomarker",function(){var e=o(this).data("paneltarget"),n=o("#infopanel_"+e);o(".ol-overlay-container").removeClass("wpol-infopanel-active"),n.closest(".ol-overlay-container").addClass("wpol-infopanel-active"),n.fadeIn()})});